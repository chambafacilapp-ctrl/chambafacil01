<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Chamba Fácil — Mapa Reparado</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
<script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
<style>#map{min-height:320px;width:100%;}</style>
</head>
<body class="antialiased">
<h1>Mapa Chamba Fácil</h1>
<div id="map"></div>
<script>
let map, markersLayer;
function ensureMap(){
  if(map)return;
  if(!window.L||!L.map){
    console.warn('[Mapa] Leaflet aún no está listo. Reintentando…');
    setTimeout(ensureMap,120);return;
  }
  try{
    map=L.map('map').setView([19.7008,-101.1844],12);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
      {maxZoom:19,attribution:'&copy; OpenStreetMap'}).addTo(map);
    markersLayer=L.layerGroup().addTo(map);
    console.log('[Mapa] Leaflet inicializado correctamente');
  }catch(e){
    console.error('[Mapa] Error al inicializar:',e);
    setTimeout(ensureMap,150);
  }
}
document.addEventListener('DOMContentLoaded',ensureMap);
</script>
</body>
</html>
